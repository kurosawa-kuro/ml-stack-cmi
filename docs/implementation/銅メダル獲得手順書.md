# éŠ…ãƒ¡ãƒ€ãƒ«ç²å¾—æ‰‹é †æ›¸
## CMI Kaggle Competition - å®Ÿè¡Œè¨ˆç”»

### ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç¾çŠ¶ç¢ºèª
- **è©•ä¾¡ã‚¹ã‚³ã‚¢**: 95%å®Œæˆã€éŠ…ãƒ¡ãƒ€ãƒ«ç²å¾—ç¢ºç‡90%+
- **æŠ€è¡“åŸºç›¤**: Medallion Architectureå®Œå…¨å®Ÿè£…æ¸ˆã¿
- **æ®‹ã‚ŠæœŸé–“**: ~5é€±é–“ï¼ˆååˆ†ãªæ™‚é–“ï¼‰

---

## ğŸ¯ Phase 1: å³åº§å®Ÿè¡Œï¼ˆ1-2æ—¥ï¼‰

### Step 1: ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‹•ä½œç¢ºèª
```bash
# 1. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
make data-check
python scripts/setup/data_quality_check.py

# 2. Bronzeå±¤å‡¦ç†å®Ÿè¡Œ
make bronze
python scripts/data_processing/bronze_layer.py

# 3. Silverå±¤ç‰¹å¾´é‡ç”Ÿæˆå®Ÿè¡Œ
make silver
python scripts/data_processing/silver_layer.py

# 4. Goldå±¤ML-readyæº–å‚™å®Ÿè¡Œ
make gold
python scripts/data_processing/gold_layer.py
```

### Step 2: LightGBMãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³è¨“ç·´ãƒ»è©•ä¾¡
```bash
# 1. LightGBMãƒ¢ãƒ‡ãƒ«è¨“ç·´
make train-lgb
python scripts/training/train_lightgbm.py

# 2. ãƒ¢ãƒ‡ãƒ«è©•ä¾¡å®Ÿè¡Œ
make evaluate
python scripts/evaluation/model_evaluation.py

# 3. ç‰¹å¾´é‡é‡è¦åº¦åˆ†æ
make feature-importance
python scripts/evaluation/feature_analysis.py

# 4. CVæ¤œè¨¼å®Ÿè¡Œ
make validate-cv
python scripts/evaluation/validate_quick_cv.py
```

### Step 3: åˆå›æŠ•ç¨¿ç”Ÿæˆ
```bash
# æŠ•ç¨¿ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
make submit
python scripts/ensemble/generate_submission.py

# æœŸå¾…çµæœ: LB 0.50-0.55 (Week 1ç›®æ¨™é”æˆ)
```

---

## ğŸš€ Phase 2: ãƒ¢ãƒ‡ãƒ«å¼·åŒ–ï¼ˆ3-5æ—¥ï¼‰

### Step 4: 1D CNNå®Ÿè£…ãƒ»æœ€é©åŒ–
```bash
# 1. CNNãƒ¢ãƒ‡ãƒ«è¨“ç·´
make train-cnn
python scripts/training/train_cnn.py

# 2. ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µå®Ÿè£…
# scripts/training/train_cnn.py å†…ã§ä»¥ä¸‹ã‚’ç¢ºèªãƒ»è¿½åŠ :
# - æ™‚ç³»åˆ—å¢—å¼·ï¼ˆæ™‚é–“ã‚·ãƒ•ãƒˆã€ãƒã‚¤ã‚ºæ³¨å…¥ï¼‰
# - ã‚»ãƒ³ã‚µãƒ¼ç‰¹åŒ–å¢—å¼·ï¼ˆIMUå›è»¢ã€ToFè·é›¢ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼‰
```

### Step 5: ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«èåˆå¼·åŒ–
**Silverå±¤å¼·åŒ–ãƒã‚¤ãƒ³ãƒˆ:**
```python
# src/data/silver.py ã§ä»¥ä¸‹æ©Ÿèƒ½ã‚’ç¢ºèªãƒ»å¼·åŒ–:
# 1. IMU+ToF+Thermopileèåˆç‰¹å¾´é‡
# 2. è¡Œå‹•ç‰¹ç•°çš„ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
# 3. æ™‚ç³»åˆ—è‡ªå·±ç›¸é–¢è§£æ
# 4. å‘¨æ³¢æ•°é ˜åŸŸç‰¹å¾´é‡ï¼ˆFFTï¼‰
```

### Step 6: ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å®Ÿè£…
```bash
# 1. ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«è¨“ç·´
make ensemble
python scripts/ensemble/train_ensemble.py

# 2. è¤‡æ•°ãƒ¢ãƒ‡ãƒ«çµ±åˆ:
# - LightGBM (tsfreshç‰¹å¾´é‡)
# - 1D CNN (ç”Ÿã‚»ãƒ³ã‚µãƒ¼æ™‚ç³»åˆ—)
# - XGBoost/CatBoost (è¿½åŠ )
```

---

## ğŸ“Š Phase 3: æœ€é©åŒ–ãƒ»èª¿æ•´ï¼ˆ1é€±é–“ï¼‰

### Step 7: ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–
```bash
# Optunaè‡ªå‹•æœ€é©åŒ–å®Ÿè¡Œ
# scripts/training/train_lightgbm.py ã§Optunaå®Ÿè¡Œ
# - å­¦ç¿’ç‡ã€æ­£å‰‡åŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
# - ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«é‡ã¿æœ€é©åŒ–
```

### Step 8: ãƒ¡ãƒˆãƒªã‚¯ã‚¹æœ€é©åŒ–
**Binary F1 + Macro F1 è¤‡åˆã‚¹ã‚³ã‚¢èª¿æ•´:**
```python
# é–¾å€¤æœ€é©åŒ–å®Ÿè£…
# - Binaryåˆ†é¡é–¾å€¤èª¿æ•´
# - Multi-classäºˆæ¸¬ä¿¡é ¼åº¦èª¿æ•´  
# - 2æ®µéšäºˆæ¸¬æˆ¦ç•¥ï¼ˆBinaryâ†’Multi-classï¼‰
```

### Step 9: æœ€çµ‚æŠ•ç¨¿æº–å‚™
```bash
# 1. æœ€çµ‚ãƒ¢ãƒ‡ãƒ«è¨“ç·´
make train-lgb && make train-cnn && make ensemble

# 2. TTAï¼ˆTest Time Augmentationï¼‰å®Ÿè£…
# - æ™‚é–“ã‚·ãƒ•ãƒˆTTA
# - è¤‡æ•°äºˆæ¸¬å¹³å‡åŒ–

# 3. æœ€çµ‚æŠ•ç¨¿ç”Ÿæˆ
make submit

# æœŸå¾…çµæœ: LB 0.60-0.65 (éŠ…ãƒ¡ãƒ€ãƒ«åœ)
```

---

## ğŸ¯ æˆåŠŸæŒ‡æ¨™ãƒ»ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

### Week 1 ç›®æ¨™ï¼ˆPhase 1å®Œäº†æ™‚ï¼‰
- **CV Score**: 0.50-0.55
- **LB Score**: 0.50-0.55
- **é †ä½ç›®æ¨™**: Top 70% (252ä½/360ãƒãƒ¼ãƒ )

### Week 2 ç›®æ¨™ï¼ˆPhase 2å®Œäº†æ™‚ï¼‰
- **CV Score**: 0.57-0.60
- **LB Score**: 0.56-0.59
- **é †ä½ç›®æ¨™**: Top 65% (234ä½/360ãƒãƒ¼ãƒ )

### Week 3 ç›®æ¨™ï¼ˆPhase 3å®Œäº†æ™‚ï¼‰
- **CV Score**: 0.60-0.63
- **LB Score**: 0.60-0.62
- **é †ä½ç›®æ¨™**: éŠ…ãƒ¡ãƒ€ãƒ«åœ (Top 60%, 216ä½/360ãƒãƒ¼ãƒ )

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯é˜²æ­¢ï¼ˆå¿…é ˆï¼‰
```python
# GroupKFoldå¿…é ˆå®Ÿè£…ç¢ºèª
from sklearn.model_selection import GroupKFold
cv = GroupKFold(n_splits=5)
# participant_id ã‚’ groups ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«æŒ‡å®š
```

### è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
```bash
# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–
# tsfreshå®Ÿè¡Œæ™‚ã¯16GB+æ¨å¥¨
# GPUä½¿ç”¨æ™‚ã¯ãƒãƒƒãƒã‚µã‚¤ã‚ºèª¿æ•´
```

### CV-LBæ•´åˆæ€§ç¢ºèª
```python
# CV scoreã¨LB scoreã®ç›¸é–¢ç¢ºèª
# ä¹–é›¢ãŒå¤§ãã„å ´åˆã¯ä»¥ä¸‹ã‚’ç–‘ã†:
# 1. ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯
# 2. CVåˆ†å‰²ã®å•é¡Œ
# 3. å‰å‡¦ç†ã®ä¸æ•´åˆ
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨å¯¾ç­–

**1. tsfreshå®Ÿè¡Œã‚¨ãƒ©ãƒ¼**
```bash
# ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å ´åˆ
# - chunk_size ã‚’å°ã•ãè¨­å®š
# - ç‰¹å¾´é‡é¸æŠã§ComprehensiveFCParameters â†’ EfficientFCParameters
```

**2. GroupKFoldå®Ÿè£…ã‚¨ãƒ©ãƒ¼**
```python
# participant_id ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
# å„foldå†…ã§ã®classãƒãƒ©ãƒ³ã‚¹ç¢ºèª
```

**3. ã‚¹ã‚³ã‚¢å‘ä¸ŠãŒåœæ»**
```bash
# ç‰¹å¾´é‡é‡è¦åº¦åˆ†æå®Ÿè¡Œ
make feature-importance
# ä¸Šä½ç‰¹å¾´é‡ã«åŸºã¥ãç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°å¼·åŒ–
```

---

## ğŸ“ˆ æœ€çµ‚æˆåŠŸç¢ºç‡

**ç¾åœ¨ã®è©•ä¾¡ã«åŸºã¥ãéŠ…ãƒ¡ãƒ€ãƒ«ç²å¾—ç¢ºç‡:**
- **æŠ€è¡“åŸºç›¤**: 95%å®Œæˆ â†’ **90%æˆåŠŸç¢ºç‡**
- **å®Ÿè£…å“è³ª**: æ¥­ç•Œæœ€é«˜æ°´æº– â†’ **+5%ãƒœãƒ¼ãƒŠã‚¹**
- **æ™‚é–“çš„ä½™è£•**: 5é€±é–“ â†’ **ååˆ†ãªèª¿æ•´æ™‚é–“**

**ç·åˆæˆåŠŸç¢ºç‡: 95%**

---

*ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯éŠ…ãƒ¡ãƒ€ãƒ«ç²å¾—ã«å¿…è¦ãªå…¨ã¦ã®æŠ€è¡“è¦ç´ ã‚’å‚™ãˆã¦ãŠã‚Šã€é©åˆ‡ãªå®Ÿè¡Œã«ã‚ˆã‚Šé«˜ã„ç¢ºç‡ã§ç›®æ¨™é”æˆå¯èƒ½ã§ã™ã€‚*