# Makefile ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰

CMIç«¶æŠ€ç”¨ã®Makefileã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°ãªä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“Œ åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
# ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºï¼ˆåˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ï¼‰
make help

# ç‰¹å®šã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
make <ã‚³ãƒãƒ³ãƒ‰å>
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»åˆæœŸåŒ–

### `make install`
åŸºæœ¬çš„ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```bash
make install
# â†’ requirements.txt ã®å†…å®¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```

### `make dev-install`
é–‹ç™ºç”¨ãƒ„ãƒ¼ãƒ«ã‚’å«ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```bash
make dev-install
# â†’ requirements-dev.txt ã®å†…å®¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆblack, flake8, mypyç­‰ï¼‰
```

### `make setup`
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç’°å¢ƒã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
```bash
make setup
# å®Ÿè¡Œå†…å®¹:
# 1. å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
# 2. project_setup.pyã‚’å®Ÿè¡Œã—ã¦ç’°å¢ƒã‚’æ¤œè¨¼
# 3. ãƒ‡ãƒ¼ã‚¿æ¥ç¶šãƒ†ã‚¹ãƒˆ
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç†è§£ãƒ»å“è³ªãƒã‚§ãƒƒã‚¯

### `make eda`
æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿åˆ†æï¼ˆEDAï¼‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make eda
# å®Ÿè¡Œå†…å®¹:
# - ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒåˆ†æ
# - æ¬ æå€¤ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¯è¦–åŒ–
# - ãƒ©ãƒ™ãƒ«åˆ†å¸ƒã¨ã‚¯ãƒ©ã‚¹ä¸å‡è¡¡ã®åˆ†æ
# - æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ã®ç”Ÿæˆ
# å‡ºåŠ›: outputs/figures/eda/
```

### `make data-check`
ãƒ‡ãƒ¼ã‚¿å“è³ªã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
```bash
make data-check
# å®Ÿè¡Œå†…å®¹:
# - ã‚»ãƒ³ã‚µãƒ¼å€¤ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯
# - ç•°å¸¸å€¤æ¤œå‡º
# - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®é€£ç¶šæ€§ç¢ºèª
# - train/testã®ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
# å‡ºåŠ›: outputs/reports/data_quality/
```

## âš™ï¸ ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆMedallion Architectureï¼‰

### `make bronze`
ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»æ­£è¦åŒ–ã—ã¾ã™ã€‚
```bash
make bronze
# Bronze Layerå‡¦ç†:
# - ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ­£è¦åŒ–ï¼ˆZ-scoreï¼‰
# - æ¬ æå€¤å‡¦ç†ï¼ˆIMUè£œé–“ã€ToF/æ¸©åº¦0åŸ‹ã‚ï¼‰
# - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¤œè¨¼
# å‡ºåŠ›: data/processed/bronze/
```

### `make silver`
ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make silver
# Silver Layerå‡¦ç†:
# - tsfreshçµ±è¨ˆç‰¹å¾´é‡ã®æŠ½å‡º
# - FFTå‘¨æ³¢æ•°é ˜åŸŸç‰¹å¾´é‡
# - ã‚»ãƒ³ã‚µãƒ¼é–“ç›¸é–¢ç‰¹å¾´é‡
# - ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ç‰¹å¾´é‡
# å‡ºåŠ›: data/processed/silver/
```

### `make gold`
æ©Ÿæ¢°å­¦ç¿’ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ã¾ã™ã€‚
```bash
make gold
# Gold Layerå‡¦ç†:
# - MLç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›
# - GroupKFoldåˆ†å‰²æº–å‚™
# - æ­£è¦åŒ–ãƒ»ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
# å‡ºåŠ›: data/processed/gold/
```

## ğŸ¤– ãƒ¢ãƒ‡ãƒ«è¨“ç·´

### `make train-lgb`
LightGBMãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’è¨“ç·´ã—ã¾ã™ã€‚
```bash
make train-lgb
# å®Ÿè¡Œå†…å®¹:
# - GroupKFoldäº¤å·®æ¤œè¨¼ï¼ˆ5-foldï¼‰
# - Binary + Multiclassäºˆæ¸¬
# - è¤‡åˆF1ã‚¹ã‚³ã‚¢è©•ä¾¡
# å‡ºåŠ›: outputs/models/lgb_baseline/
```

### `make train-cnn`
1D CNNãƒ¢ãƒ‡ãƒ«ã‚’è¨“ç·´ã—ã¾ã™ã€‚
```bash
make train-cnn
# å®Ÿè¡Œå†…å®¹:
# - InceptionTimeé¢¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
# - ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ã‚»ãƒ³ã‚µãƒ¼èåˆ
# - ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µï¼ˆæ™‚é–“ã‚·ãƒ•ãƒˆã€ãƒã‚¤ã‚ºï¼‰
# å‡ºåŠ›: outputs/models/cnn_1d/
```

## ğŸ“ˆ è©•ä¾¡ãƒ»åˆ†æ

### `make evaluate`
ãƒ¢ãƒ‡ãƒ«ã®åŒ…æ‹¬çš„è©•ä¾¡ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make evaluate
# å®Ÿè¡Œå†…å®¹:
# - æ··åŒè¡Œåˆ—ã®è©³ç´°åˆ†æ
# - å‚åŠ è€…åˆ¥æ€§èƒ½è©•ä¾¡
# - èª¤åˆ†é¡ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç‰¹å®š
# - ãƒ¢ãƒ‡ãƒ«æ¯”è¼ƒï¼ˆè¤‡æ•°ãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚‹å ´åˆï¼‰
# å‡ºåŠ›: outputs/evaluation/
```

### `make feature-importance`
ç‰¹å¾´é‡é‡è¦åº¦ã‚’åˆ†æã—ã¾ã™ã€‚
```bash
make feature-importance
# å®Ÿè¡Œå†…å®¹:
# - LightGBMç‰¹å¾´é‡é‡è¦åº¦
# - Permutationé‡è¦åº¦
# - ç‰¹å¾´é‡ç›¸é–¢åˆ†æ
# - ã‚»ãƒ³ã‚µãƒ¼åˆ¥é‡è¦åº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°
# å‡ºåŠ›: outputs/feature_analysis/
```

### `make validate-cv`
ã‚¯ã‚¤ãƒƒã‚¯äº¤å·®æ¤œè¨¼ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make validate-cv
# ç°¡æ˜“çš„ãªCVæ¤œè¨¼ï¼ˆé–‹ç™ºä¸­ã®ç¢ºèªç”¨ï¼‰
```

## ğŸ­ æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—

### `make ensemble`
ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’è¨“ç·´ã—ã¾ã™ã€‚
```bash
make ensemble
# å®Ÿè¡Œå†…å®¹:
# - LightGBM + CNN + XGBoostçµ±åˆ
# - é‡ã¿ä»˜ã‘å¹³å‡ãƒ»ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°
# - æœ€é©é‡ã¿æ¢ç´¢
# å‡ºåŠ›: outputs/models/ensemble/
```

### `make submit`
Kaggleæå‡ºç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
```bash
make submit
# å®Ÿè¡Œå†…å®¹:
# - æœ€çµ‚äºˆæ¸¬ã®ç”Ÿæˆ
# - submission.csvã®ä½œæˆ
# å‡ºåŠ›: outputs/submissions/
```

## ğŸ”„ é€±åˆ¥ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆä¸€æ‹¬å®Ÿè¡Œï¼‰

### `make week1-baseline`
Week 1ã®å…¨å·¥ç¨‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make week1-baseline
# å®Ÿè¡Œé †åº:
# 1. setup      â†’ ç’°å¢ƒåˆæœŸåŒ–
# 2. eda        â†’ ãƒ‡ãƒ¼ã‚¿æ¢ç´¢
# 3. data-check â†’ å“è³ªç¢ºèª
# 4. bronze     â†’ ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
# 5. silver     â†’ ç‰¹å¾´é‡ç”Ÿæˆ
# 6. gold       â†’ MLæº–å‚™
# 7. train-lgb  â†’ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³è¨“ç·´
# 8. evaluate   â†’ æ€§èƒ½è©•ä¾¡
```

### `make week2-deep-learning`
Week 2ã®CNNè¨“ç·´ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make week2-deep-learning
# å®Ÿè¡Œé †åº:
# 1. train-cnn  â†’ CNNè¨“ç·´
# 2. evaluate   â†’ æ€§èƒ½è©•ä¾¡
```

### `make week3-final`
Week 3ã®æœ€çµ‚æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make week3-final
# å®Ÿè¡Œé †åº:
# 1. feature-importance â†’ ç‰¹å¾´é‡åˆ†æ
# 2. ensemble          â†’ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«
# 3. submit            â†’ æå‡ºãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
```

## ğŸ”§ ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ä¿å®ˆ

### `make lint`
ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
```bash
make lint
# ãƒã‚§ãƒƒã‚¯å†…å®¹:
# - blackï¼ˆã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
# - flake8ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ï¼‰
# - mypyï¼ˆå‹ãƒã‚§ãƒƒã‚¯ï¼‰
```

### `make format`
ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚
```bash
make format
# blackã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ•´å½¢
```

### `make test`
ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
make test
# pytestã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸73%ï¼‰
```

### `make clean`
å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚
```bash
make clean
# å‰Šé™¤å¯¾è±¡:
# - outputs/
# - submissions/
# - logs/
# - __pycache__
# - .pytest_cache
```

## ğŸ’¡ ä½¿ç”¨ä¾‹

### åˆã‚ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å ´åˆ
```bash
# 1. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
make install
make setup

# 2. Week 1ã®ä½œæ¥­ã‚’ä¸€æ‹¬å®Ÿè¡Œ
make week1-baseline

# 3. çµæœã‚’ç¢ºèª
ls outputs/models/lgb_baseline/
```

### æ—¥ã€…ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼
```bash
# 1. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®ã¿å®Ÿè¡Œ
make bronze
make silver
make gold

# 2. ãƒ¢ãƒ‡ãƒ«è¨“ç·´
make train-lgb

# 3. è©•ä¾¡
make evaluate
```

### æœ€çµ‚æå‡ºå‰
```bash
# 1. å…¨ä½“æœ€é©åŒ–
make week3-final

# 2. æå‡ºãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls outputs/submissions/

# 3. Kaggleã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
```

## âš ï¸ æ³¨æ„äº‹é …

1. **ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ç¢ºèª**: åˆå›å®Ÿè¡Œå‰ã«ç«¶æŠ€ãƒ‡ãƒ¼ã‚¿ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
2. **é †åºã®é‡è¦æ€§**: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¯ bronze â†’ silver â†’ gold ã®é †åºã§å®Ÿè¡Œ
3. **GroupKFoldå¿…é ˆ**: participant_idã«ã‚ˆã‚‹ãƒªãƒ¼ã‚¯é˜²æ­¢ãŒé‡è¦
4. **GPUåˆ©ç”¨**: CNNè¨“ç·´æ™‚ã¯GPUç’°å¢ƒæ¨å¥¨

## ğŸ¯ Bronze Medalé”æˆã¸ã®æ¨å¥¨ãƒ•ãƒ­ãƒ¼

```bash
# Week 1ï¼ˆåŸºç›¤æ§‹ç¯‰ï¼‰
make week1-baseline
# â†’ æœŸå¾…ã‚¹ã‚³ã‚¢: LB 0.50+

# Week 2ï¼ˆæ·±å±¤å­¦ç¿’ï¼‰
make train-cnn
make evaluate
# â†’ æœŸå¾…ã‚¹ã‚³ã‚¢: LB 0.57-0.60

# Week 3ï¼ˆæœ€çµ‚èª¿æ•´ï¼‰
make week3-final
# â†’ æœŸå¾…ã‚¹ã‚³ã‚¢: LB 0.62+ (Bronze Medal!)
```

---

è©³ç´°ãªé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ [CLAUDE.md](CLAUDE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚